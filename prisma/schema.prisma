generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model bill {
  id        String         @id @default(uuid())
  tableId   Int?
  people    Int?
  total     Float?
  paid      Float?
  closedAt  DateTime?
  createdAt DateTime       @default(now())
  updatedAt DateTime       @updatedAt
  table     table?         @relation(fields: [tableId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  products  billProducts[]
}

model billProducts {
  id        String  @id @default(uuid())
  billId    String
  productId Int
  price     Float   @default(0)
  quantity  Int     @default(0)
  note      String?
  product   product @relation(fields: [productId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  bill      bill    @relation(fields: [billId], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model category {
  id       Int       @id @default(autoincrement())
  name     String
  color    String?
  products product[]
}

model product {
  id           Int            @id @default(autoincrement())
  name         String
  description  String?
  price        Float?
  cost         Float?
  tax          Float?
  stock        Int?
  image        String?
  categoryId   Int?
  createdAt    DateTime       @default(now())
  updatedAt    DateTime       @updatedAt
  categories   category?      @relation(fields: [categoryId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  billProducts billProducts[]
}

model table {
  id    Int    @id @default(autoincrement())
  name  String
  size  Int    @default(0)
  bills bill[]
}

model user {
  id       Int     @id @default(autoincrement())
  name     String?
  username String?
  password String?
  role     String?
}

model item {
  id         String    @id @default(uuid())
  type       String
  options    String?
  locationId Int?
  location   location? @relation(fields: [locationId], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model location {
  id    Int    @id @default(autoincrement())
  name  String
  items item[]
}
