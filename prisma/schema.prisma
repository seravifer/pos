generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model bill {
  id        String         @id @default(uuid())
  tableId   String?
  people    Int?
  total     Float?
  paid      Float?
  closedAt  DateTime?
  createdAt DateTime       @default(now())
  updatedAt DateTime       @updatedAt
  table     table?         @relation(fields: [tableId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  products  billProducts[]
}

model billProducts {
  id        String  @id @default(uuid())
  billId    String
  productId String
  price     Float   @default(0)
  quantity  Int     @default(0)
  note      String?
  product   product @relation(fields: [productId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  bill      bill    @relation(fields: [billId], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model category {
  id       String    @id @default(uuid())
  name     String
  color    String?
  products product[]
}

model product {
  id           String         @id @default(uuid())
  name         String
  description  String?
  price        Float?
  cost         Float?
  tax          Float?
  stock        Int?
  image        String?
  categoryId   String?
  createdAt    DateTime       @default(now())
  updatedAt    DateTime       @updatedAt
  categories   category?      @relation(fields: [categoryId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  billProducts billProducts[]
}

model user {
  id       String  @id @default(uuid())
  name     String?
  username String?
  password String?
  role     String?
}

model table {
  id         String    @id @default(uuid())
  name       String
  size       Int       @default(0)
  type       String
  options    String
  locationId String?
  location   location? @relation(fields: [locationId], references: [id], onDelete: Cascade, onUpdate: NoAction)
  bills      bill[]
}

model location {
  id     String  @id @default(uuid())
  name   String
  tables table[]
}
